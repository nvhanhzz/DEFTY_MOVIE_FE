$primary-text-color: #e5e7eb; // Light gray (adjust if needed)
$secondary-text-color: #9ca3af; // Medium gray
$tertiary-text-color: #6b7280; // Darker gray for placeholders, borders
$background-color: #0f172a; // Very dark blue/slate (adjust to match image)
$input-background-color: transparent; // Input background often transparent in this style
$border-color: #334155; // Slate gray for borders/dividers
$accent-color: #00c635; // green for primary buttons
$accent-hover-color: #0cae36; // Darker green for hover
$secondary-button-bg: #374151; // Gray for secondary buttons
$secondary-button-hover-bg: #4b5563; // Lighter gray hover
$error-color: #ef4444; // Red
$error-background-color: rgba(239, 68, 68, 0.1);
$link-hover-color: #ffffff; // White or light gray on hover
$border-radius: 6px;
$font-family: Inter, sans-serif; // Example font stack

// --- Base Styles ---
.comments-section {
  color: $primary-text-color;
  margin: 1rem auto;
  font-family: $font-family;
  border-top: 1px solid #334155;

  &__title {
    font-size: 1.125rem; // lg
    font-weight: 500; // medium (adjust as needed)
    margin-bottom: 1.5rem; // mb-6
    color: $primary-text-color;
  }
}

// --- Avatar Styles (Consistent Size) ---
.avatar {
  border-radius: 50%;
  object-fit: cover;
  margin-right: 0.75rem; // mr-3
  flex-shrink: 0;

  &.avatar-large { // Use one size for consistency like image 1
    width: 2.5rem; // w-10
    height: 2.5rem; // h-10
  }
}

.avatar-placeholder {
  border-radius: 50%;
  background-color: $tertiary-text-color; // Use a visible placeholder color
  color: $primary-text-color;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  margin-right: 0.75rem; // mr-3
  flex-shrink: 0;

  &.avatar-large { // Use one size
    width: 2.5rem; // w-10
    height: 2.5rem; // h-10
    font-size: 1rem;
  }
}

// --- Comment Form Styles (Top Level & Reply) ---
.comment-form {
  display: flex;
  align-items: flex-start; // Align items to the top
  margin-bottom: 1.5rem; // mb-6

  &__main {
    flex: 1; // Take remaining space
  }

  &__actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem; // space-x-2
    margin-top: 0.5rem; // mt-2

    // Specific styles for reply actions if needed
    &--reply {
      margin-top: 0.25rem; // Reduce top margin for reply actions
    }
  }

  // Styles specific to the reply form container
  &--reply {
    margin-top: 1rem; // Add space above the reply form
    margin-bottom: 0; // No bottom margin for nested form
  }
}

// --- Input Area Styles ---
.comment-input {
  position: relative;
  // background-color: $input-background-color; // Can be transparent
  border-bottom: 1px solid $border-color; // Underline effect like image 1
  // border-radius: $border-radius; // Remove border-radius if using underline
  padding-bottom: 0.5rem; // Space below the textarea before the underline
  // padding-right: 3.5rem; // Only if using char count inside

  &__textarea {
    width: 100%;
    background-color: transparent;
    border: none;
    color: $primary-text-color;
    font-size: 0.875rem; // text-sm
    line-height: 1.4; // Adjust line height for better readability
    resize: none; // Disable manual resize
    outline: none;
    display: block;
    min-height: 2.5rem; // Ensure it looks like an input field initially

    &::placeholder {
      color: $secondary-text-color;
    }

    // Expand height automatically (optional JS might be better)
    // &:focus, &:not(:placeholder-shown) {
    //   min-height: 4rem; // Expand on focus or when text exists
    // }
  }

  &__char-count {
    position: absolute;
    bottom: -1rem; // Position below the underline
    right: 0;
    font-size: 0.75rem; // text-xs
    color: $secondary-text-color;
  }

  // Style for reply input (nested)
  &--reply {
    border-bottom-width: 1px; // Ensure reply also has underline
    padding-bottom: 0.25rem; // Slightly less padding for reply
    .comment-input__textarea {
      min-height: 2rem; // Smaller initial height for reply
      font-size: 0.8125rem; // Slightly smaller font for reply
      display: flex;
    }
  }
}

// --- Button Styles ---
.button {
  padding: 0.4rem 0.9rem; // Adjust padding
  border-radius: $border-radius;
  font-size: 0.8125rem; // Slightly smaller font
  font-weight: 500; // medium
  border: none;
  cursor: pointer;
  transition: background-color 0.2s ease, opacity 0.2s ease;

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  &.button-loading {
    cursor: wait;
    // Add subtle loading indicator if needed
  }
}

.button-primary { // Blue button (Post/Comment)
  background-color: $accent-color;
  color: white;

  &:hover:not(:disabled) {
    background-color: $accent-hover-color;
  }
}

.button-secondary { // Gray button (Cancel)
  background-color: $secondary-button-bg;
  color: $primary-text-color; // Lighter text on gray

  &:hover:not(:disabled) {
    background-color: $secondary-button-hover-bg;
  }
}

// --- Comments List Styles ---
.comments-list {
  margin-top: 2rem; // More space above the list
  display: flex;
  flex-direction: column;
  gap: 1.5rem; // Space between top-level comments
}

// --- Individual Comment Container (Applies to top-level and replies) ---
.comment-container {
  display: flex;
  align-items: flex-start; // Align avatar and content top
  // border-bottom: 1px solid $border-color; // Remove direct border
  padding-bottom: 1rem; // Space below content before divider
  position: relative; // Needed for absolute positioning of the pseudo-element

  // Add the border using a pseudo-element
  &::after {
    content: '';
    position: absolute;
    bottom: 0; // Position at the bottom of the container
    // Adjust this left value to match your desired indentation
    // (e.g., avatar width + margin)
    left: 3.25rem;
    right: 0; // Extend to the right edge
    height: 1px;
    background-color: $border-color; // Use background for the line
  }

  &:last-child {
    // border-bottom: none; // No longer needed
    padding-bottom: 0;
    // Hide the pseudo-element border for the last item
    &::after {
      display: none;
    }
  }

  // Indentation for replies
  &--reply {
    // border-bottom: none; // No border needed for replies
    padding-bottom: 0; // No extra padding below replies unless they are the last in their thread
    margin-top: 1rem; // Space above a reply thread

    // Replies don't need the bottom border pseudo-element
    &::after {
      display: none;
    }
  }
}

.comment-content {
  flex: 1; // Take remaining space
}

.comment-header {
  display: flex;
  align-items: center; // Align items vertically
  flex-wrap: wrap; // Allow wrapping on small screens
  margin-bottom: 0.3rem; // mb-1
  font-size: 0.8125rem; // Slightly smaller than text-sm
}

.comment-author {
  font-weight: 500; // medium
  color: $primary-text-color;
  margin-right: 0.3rem; // space after author
}

.comment-timestamp {
  font-size: 0.75rem; // text-xs
  color: $secondary-text-color;
}

.comment-text {
  font-size: 0.875rem; // text-sm
  color: $primary-text-color;
  margin-bottom: 0.5rem; // mb-2
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.5; // Improve readability
}

.comment-actions {
  display: flex;
  align-items: center;
  gap: 1rem; // space-x-4
  margin-top: 0.5rem; // Add some space above actions
  font-size: 0.8125rem; // text-xs slightly larger
  color: $secondary-text-color;
}

// --- Action Button Styles (Like, Reply, Delete) ---
.action-button {
  display: flex;
  align-items: center;
  background: none;
  border: none;
  color: $secondary-text-color; // Default color
  cursor: pointer;
  padding: 0.1rem 0.2rem; // Small padding for easier clicking
  font-size: inherit; // Inherit size
  font-weight: 500; // Medium weight
  transition: color 0.2s ease;

  &:hover {
    color: $link-hover-color; // Brighter color on hover
  }

  &--delete:hover {
    color: $error-color; // Red hover for delete
  }

  .icon {
    width: 0.9rem; // Slightly smaller icons (adjust as needed)
    height: 0.9rem;
    margin-right: 0.3rem; // mr-1
    stroke-width: 2; // Ensure stroke width is visible
  }
}


// --- Nested Replies Container ---
.comment-replies {
  margin-top: 1rem; // Space above the first reply in a thread
  // No border needed here as indentation is handled by .comment-container--reply
}


// --- Loading/Error/Empty/Login Messages ---
.loading-message,
.no-comments-message,
.login-prompt {
  text-align: center;
  color: $secondary-text-color;
  padding: 1.5rem;
  font-size: 0.875rem;
}

.login-prompt a {
  color: $accent-color;
  text-decoration: none;
  &:hover {
    text-decoration: underline;
  }
}

.error-message {
  text-align: left; // Align left for better readability
  color: $error-color;
  background-color: $error-background-color;
  border: 1px solid darken($error-color, 10%);
  padding: 0.75rem 1rem;
  border-radius: $border-radius;
  margin-bottom: 1.5rem; // mb-6
  font-size: 0.875rem;
}